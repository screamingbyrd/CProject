{% extends "AppBundle::layout.html.twig" %}

{% block title %}
    Register - {{ parent() }}
{% endblock %}

{% block body %}

    <div class="container search-proposer-page">
        <h2 class="text-center">{{ 'searchProposer.title'|trans }}</h2>
        <br>
        <div>{{ 'searchProposer.discover'|trans }}</div>

        <input type="text" id="myInput" onkeyup="showProposer()" placeholder="Search for names.." title="Type in a name" class="search-proposer">

        <ul id="myUL">

            {% for proposer in proposers %}
                    {% if proposer.phone is not null %}
                        <a target="_blank" href="{{ path('show_proposer', {'id':proposer.id}) }}" class="col-md-4 featured-offer zoom  thump-proposer">
                            <div class="thumbnail featured-offer-item" >
                                <div class="header-thumb-proposer">
                                    {% if proposer.logo.imageName is not null %}
                                        {% set image =  'uploads' ~ vich_uploader_asset(proposer.logo, 'imageFile', 'AppBundle\\Entity\\Image') %}
                                    {% else %}
                                        {% set image = 'images/logo-default.png' %}
                                    {% endif %}
                                    <img src="{{ asset(image) }}" class="proposer-thumb-logo" />
                                    <h3 class="proposer-title">{{ proposer.name }}</h3>
                                </div>
                                {% if proposer.coverImage.imageName is not null %}
                                    {% set image =  'uploads' ~ vich_uploader_asset(proposer.coverImage, 'imageFile', 'AppBundle\\Entity\\Image') %}
                                {% else %}
                                    {% set image = 'images/default_cover_image6.jpg' %}
                                {% endif %}
                                <div class="caption" style="background-repeat: no-repeat;background-size: cover;background-image: url({{ asset(image) }});min-height: 185px;">
                                </div>
                                <div class="thumb-proposer-info">
                                    {{ proposer.description}}
                                </div>
                            </div>
                        </a>
                    {% endif %}
            {% endfor %}</div>
        </ul>
    </div>

    <script>
        function showProposer() {
            let input, filter, ul, li, a, i;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            ul = document.getElementById("myUL");
            a = ul.getElementsByTagName("a");
            for (i = 0; i < a.length; i++) {
                a[i].style.display = "none";
            }
            for (i = 0; i < a.length; i++) {
                let h = a[i].getElementsByClassName("proposer-title")[0];
                if (h.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    a[i].style.display = "";
                } else {
                    a[i].style.display = "none";

                }
            }
        }
    </script>


{% endblock %}