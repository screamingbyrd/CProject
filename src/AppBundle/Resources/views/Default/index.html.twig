{% extends "AppBundle::layout.html.twig" %}

{% block title %}
    Accueil - {{ parent() }}
{% endblock %}

{% block body %}

    <div class="jumbotron homepage-jumbotron">
        <h2>Find the career you deserve</h2>
        <p class="homepage-subtitle">Your job search starts and ends with us</p>
        <p>
            <form method="post" action="{{ path('search_page_offer') }}" id="search-offer-homepage">
                <div class="homepage-search-bar search-bar">
                    <div class="div-keyword-input"><input class="form-control" name="keyword" type="text" id="keyword-input" placeholder="{{ 'form.offer.search.keyword' | trans }}" title="{{ 'form.offer.search.keyword' | trans }}"></div>
                    <div class="div-location-input"><input class="form-control" name="location" type="text" id="location-input" placeholder="{{ 'form.offer.search.location' | trans }}" title="{{ 'form.offer.search.location' | trans }}"></div>
                    <input type="submit" class="jobnow-button searchOffer-home" value="{{ 'form.offer.search.search' | trans }}">
                </div>
            </form>
        </p>
    </div>
    <div class="container homepage-container">
        {% if featuredOffer|length > 0 %}
            <div class="row fade-in-right animated">
                <h1 class="featured-offer text-center">Featured Offer</h1>
                {% if featuredOffer|length == 1 %}
                    {% set blocOffer = 12 %}
                {% elseif featuredOffer|length == 2 %}
                    {% set blocOffer = 6 %}
                {% else %}
                    {% set blocOffer = 4 %}
                {% endif %}
                {%  for offer in featuredOffer %}
                    <a class="col-sm-6 col-md-{{ blocOffer }} zoom" href="{{ path('show_offer', {'id': offer.offer.id, 'url':offer.offer.offerUrl}) }}">
                        <div class="thumbnail featured-offer-item">
                            {% if offer.offer.image is not null and offer.offer.image.imageName is not null %}
                                {% set image =  'uploads' ~ vich_uploader_asset(offer.offer.image, 'imageFile', 'AppBundle\\Entity\\Image') %}
                            {% elseif offer.offer.employer.coverImage.imageName is not null %}
                                {% set image =  'uploads' ~ vich_uploader_asset(offer.offer.employer.coverImage, 'imageFile', 'AppBundle\\Entity\\Image') %}
                            {% elseif offer.offer.employer.logo.imageName is not null %}
                                {% set image =  'uploads' ~ vich_uploader_asset(offer.offer.employer.logo, 'imageFile', 'AppBundle\\Entity\\Image') %}
                            {% else %}
                                {% set image = 'images/default_cover_image6.jpg' %}
                            {% endif %}
                            <div class="caption background-offer" style="display: flex; justify-content: center;align-items: center;background-repeat: no-repeat;background-size: cover;background-image: url('/jobnowlu/web/{{ image }}');min-height: 185px;">
                                <div class="layer">
                                </div>
                                <div class="offer-thumb-image-div">
                                    {% if offer.offer.employer.logo.imageName is not null and offer.offer.employer.coverImage.imageName is not null %}<img src="/jobnowlu/web/uploads{{ vich_uploader_asset(offer.offer.employer.logo, 'imageFile', 'AppBundle\\Entity\\Image') }}" class="offer-thumb-logo" />{% endif %}
                                </div>
                            </div>

                            <div class="caption">
                                <h3>{{ offer.offer.title }}</h3>
                                <p><span class="other-element"><i class="fa fa-map-marker"></i>{{ offer.offer.location|truncate(20, true) }}</span><span class="other-element"><i class="fa fa-file-text-o"></i>{{ offer.offer.contractType.name |trans }}</span></p>
                                <div class="offer-thumb-description">{{ offer.offer.description |truncate(250, true)| raw}}</div>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <hr>
        {% endif %}
        {% if featuredEmployer|length > 0 %}
            <div class="row featured-employer fade-in-left animated">
                <h1 class="featured-offer text-center">Featured Employer</h1>
                {% if featuredEmployer|length == 1 %}
                    {% set blocEmployer = 12 %}
                {% elseif featuredEmployer|length == 2 %}
                    {% set blocEmployer = 6 %}
                {% else %}
                    {% set blocEmployer = 4 %}
                {% endif %}
                {%  for employer in featuredEmployer %}
                <a class="col-sm-6 col-md-{{ blocEmployer }} zoom thump-employer" href="{{ path('show_employer', {'id':employer.employer.id}) }}">
                    <div class="thumbnail featured-employer-item" >
                        <div class="header-thumb-employer">
                            {% if employer.employer.logo.imageName is not null %}
                                {% set image =  'uploads' ~ vich_uploader_asset(employer.employer.logo, 'imageFile', 'AppBundle\\Entity\\Image') %}
                            {% else %}
                                {% set image = 'images/logo-default.png' %}
                            {% endif %}
                            <img src="/jobnowlu/web/{{ image }}" class="employer-thumb-logo" />
                            <h3>{{ employer.employer.name }}</h3>
                        </div>
                        {% if employer.employer.coverImage.imageName is not null %}
                            {% set image =  'uploads' ~ vich_uploader_asset(employer.employer.coverImage, 'imageFile', 'AppBundle\\Entity\\Image') %}
                        {% else %}
                            {% set image = 'images/default_cover_image6.jpg' %}
                        {% endif %}
                        <div class="caption" style="background-repeat: no-repeat;background-size: cover;background-image: url('/jobnowlu/web/{{ image }}');min-height: 185px;">
                        </div>
                        <div class="thumb-employer-info">
                            {{ employer.employer.description |truncate(300, true)}}
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
            <hr>
        {% endif %}
        <h1 class="text-center featured-offer" >Category</h1>
        <div class="row">
            {% for row  in tags|batch(2, null) %}
                <div class="{{ cycle(['color-row',''],loop.index) }}">
                    {% for tag in row %}
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 homepage-href-row"><a class="homepage-href-tag" href="{{ path('search_page_offer', {'tags':[tag.name]}) }}">{{ tag.name|trans }}</a><span style="float: right;">{{ tag.countOffer }}</span></div>
                    {% endfor %}
                </div>

            {% endfor %}
        </div>


        <hr>

        <div class="jumbotron jobnow-description fade-in-right animated">
            <p>{{ 'homepage.ourMission' |trans}}</p>
        </div>


    </div>

    <style>
        .homepage-href-row{
            padding: 10px;
            padding-right: 25px;
            font-size:20px;
        }
        .homepage-href-tag{
            text-decoration: none !important;
        }
        .homepage-jumbotron::after{
            content: '';
            background-image:url({{asset('images/jobnow-home.jpg')}});
            background-size: cover;
            background-repeat: no-repeat;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            position:absolute;
            z-index: -1;
        }
    </style>

{% endblock %}




